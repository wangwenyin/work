<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="./css/price-info.css">
    <link rel="stylesheet" href="./css/weui.min.css" />
    <title>Document</title>
</head>

<body class="wrapper">
    <header class="search-bar">
        <div class="search-box">
            <div class="sys-name">深圳造价</div>
            <input type="text" placeholder="请输入材料设备名称或规格型号">
        </div>
        <div class="select-box">
            <div class="weui-cells">
                <a class="weui-cell weui-cell_access material-type" href="javascript:;">
                    <div class="weui-cell__bd">
                        <p>所属类别</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
                <a class="weui-cell weui-cell_access date-picker" href="javascript:;">
                    <div class="weui-cell__bd">
                        <p>2020年</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
                <a class="weui-cell weui-cell_access date-picker" href="javascript:;">
                    <div class="weui-cell__bd">
                        <p>04月</p>
                    </div>
                    <div class="weui-cell__ft"></div>
                </a>
            </div>
        </div>
    </header>
    <section class="common-list">
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
        <div class="list-item">
            <div class="top">
                <span>圆钢(盘圆) (HPB300)</span><span>单位：t</span>
            </div>
            <div class="bottom">
                <div class="left-info">φ6.5-10mm</div>
                <div class="right-info">
                    <span class="tag">价</span>
                    <span class="info">含税：<span class="value">4154.00元</span></span>
                </div>
            </div>
        </div>
    </section>
    <footer class="tabbar">
        <a class="tab active" href="#">
            <img src="./images/price-icon-s.png">
            <div class="text">价格信息</div>
        </a>
        <a class="tab" href="./cost-index.html">
            <img src="./images/index-icon.png">
            <div class="text">造价指数</div>
        </a>
    </footer>
</body>

</html>
<script type="text/javascript" src="./js/rem.js"></script>
<script type="text/javascript" src="./js/zepto.min.js"></script>
<!-- 最新weuijs的datePicker有问题,需用老版本 -->
<script type="text/javascript" src="https://res.wx.qq.com/open/libs/weuijs/1.1.3/weui.js"></script>
<script>
    // 跳转详情
    $('.common-list .list-item').click(function () {
        location.href = './price-trend.html';
    })

    // weuijs参考文档：https://github.com/Tencent/weui.js/blob/master/docs/component/picker.md
    // 设置日期
    setDate();

    function setDate() {
        var dateEle = $('.date-picker .weui-cell__bd p');
        // dateEle.html(new Date().toLocaleDateString());
        $('.date-picker').on('click', function () {
            weui.datePicker({
                start: new Date(),
                end: 2030,
                defaultValue: [2020, 6, 9],
                onChange: function (result) {
                    console.log(result);
                },
                onConfirm: function (dateList) {
                    console.log(dateList);
                    var dateStr = '';
                    dateList.forEach(function (item) {
                        dateStr += (item.value.toString().length === 1 ? '0' + item.value :
                            item.value) + '/';
                    })
                    dateStr = dateStr.substr(0, dateStr.length - 1)
                    dateEle.html(dateStr);
                },
                id: 'datePicker'
            });
        })
    };

    // 设置类别
    setMaterialType();

    function setMaterialType() {
        $('.material-type').on('click', function () {
            weui.picker([{
                    label: '飞机票',
                    value: 0,
                    children: [{
                            label: '经济舱',
                            value: 1
                        },
                        {
                            label: '商务舱',
                            value: 2
                        }
                    ]
                },
                {
                    label: '火车票',
                    value: 1,
                    children: [{
                            label: '卧铺',
                            value: 1,
                            disabled: true // 不可用
                        },
                        {
                            label: '坐票',
                            value: 2
                        },
                        {
                            label: '站票',
                            value: 3
                        }
                    ]
                },
                {
                    label: '汽车票',
                    value: 3,
                    children: [{
                            label: '快班',
                            value: 1
                        },
                        {
                            label: '普通',
                            value: 2
                        }
                    ]
                }
            ], {
                className: 'custom-classname',
                container: 'body',
                defaultValue: [1, 3],
                onChange: function (result) {
                    console.log(result)
                },
                onConfirm: function (result) {
                    $('.material-type .weui-cell__bd p').html(result[0].label + '-' + result[1].label)
                },
                id: 'doubleLinePicker'
            });
        })
    }
</script>