<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>会议预定</title>
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/meeting-room-booking.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.css">
</head>

<body>
    <div class="header">
        <div class="gation clearfix">
            <div class="gatLeft fl">
                <img src="img/logo.png">
                <span title="中信国安信息产业股份有限公司">中信国安信息产业股份有限公司</span>
            </div>
            <div class="gatRight fr">
                <img src="img/icon_setting.png">
                <img src="img/icon_boss.png">
                <img src="img/icon_cspace.png">
                <img src="img/icon_exit.png">
            </div>
        </div>
        <div class="navbarbox clearfix">
            <ul class="navul fl clearfix">
                <li class="navli">工程概况</li>
                <li class="navli opt">数字工地</li>
                <li class="navli">智能分析</li>
                <li class="navli">安全管理</li>
                <li class="navli">绿色施工</li>
            </ul>
            <ul class="navul fr clearfix">
                <li class="navli">质量管理</li>
                <li class="navli">技术管理</li>
                <li class="navli">生产管理</li>
                <li class="navli">经营管理</li>
                <li class="navli">党建工作</li>
            </ul>
        </div>
        <div class="project">
            <div class="projtxt1">智慧工地</div>
            <div class="projtxt2" title="深圳市清华国际研究院第一期">深圳市清华国际研究院第一期</div>
        </div>
    </div>
    <div class="infbox">
        <div class="inftit">会议室&展厅预定</div>
        <ul class="inful clearfix">
            <li class="infli arrow"></li>
            <li class="infli pitch">数据面板</li>
        </ul>
        <div class="content">
            <div class="content-left">
                <div id="calendar"></div>
                <div class="echarts-box">
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                    <div class="echart"></div>
                </div>
                <ul class="meeting-legend">
                    <li><span></span><span>可预订</span></li>
                    <li><span></span><span>未进行会议</span></li>
                    <li><span></span><span>不可占用</span></li>
                    <li><span></span><span>已进行会议</span></li>
                </ul>
                <div class="meeting-room-select-box">
                    <select>
                        <option value="1">1号会议室</option>
                        <option value="2">2号会议室</option>
                        <option value="3">3号会议室</option>
                        <option value="4">4号会议室</option>
                        <option value="5">5号会议室</option>
                        <option value="6">6号会议室</option>
                    </select>
                </div>
            </div>
            <div class="content-right">
                <div class="meeting-echart-box">
                    <div class="title">会议室使用频率</div>
                    <div class="meeting-echart-inner">
                        <div class="meeting-echart"></div>
                        <ul class="legend-box">
                            <li>
                                <span></span>
                                <span>1号会议厅</span>
                            </li>
                            <li>
                                <span></span>
                                <span>2号会议厅</span>
                            </li>
                            <li>
                                <span></span>
                                <span>3号会议厅</span>
                            </li>
                            <li>
                                <span></span>
                                <span>4号会议厅</span>
                            </li>
                            <li>
                                <span></span>
                                <span>5号会议厅</span>
                            </li>
                            <li>
                                <span></span>
                                <span>5号会议厅</span>
                            </li>
                        </ul>
                        <div class="max-percent">42.5%</div>
                    </div>  
                </div>
                <div class="hall-echart-box">
                    <div class="title">展厅最近7日预定情况(h)</div>
                    <div class="hall-echart"></div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/jquery.searchableSelect.js"></script>
<script src="js/echarts.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.23.0/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/fullcalendar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.0/locale-all.js"></script>
<script>
    $(function () {
        // 会议室下拉框
        $('.meeting-room-select-box select').searchableSelect();
        
        // fullcalendar官网：https://fullcalendar.io/
        // github：https://github.com/fullcalendar/fullcalendar
        // 中文文档：https://www.helloweba.net/javascript/231.html
        initCalendar();
        function initCalendar() {
            $('#calendar').fullCalendar({
                locale: 'zh-cn',
                header: {
                    // center: 'month,agendaWeek'
                },
                weekMode: 'liquid',
                height: 797
            })
        };

        // 每天预定情况图表
        const num = 42;
        for (let i=0; i<num; i++) {
            oneDayBookingEc(i)
        };
        function oneDayBookingEc(i) {  
            const oneDayEc = echarts.init($('.echart')[i]);
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer : {            
                        type : 'shadow'        
                    }
                },
                grid: {
                    left: 0,
                    right: '-40%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    show: false
                },
                yAxis: {
                    type: 'value',
                    show: false
                },
                color: ['#06EDAE', '#F66A57', '#AFB4B7', '#FFB81F'],
                series: [
                    {
                        name:'可预订',
                        type:'bar',
                        barWidth: 12,
                        data:[20]
                    },
                    {
                        name:'未进行会议',
                        type:'bar',
                        barWidth: 12,
                        data:[30]
                    },
                    {
                        name:'不可占用',
                        type:'bar',
                        barWidth: 12,
                        data:[100]
                    },
                    {
                        name:'已进行会议',
                        type:'bar',
                        barWidth: 12,
                        barGap: '50%',
                        data:[50]
                    }
                ]
            };
            oneDayEc.setOption(option);
        }

        // 右侧ecahrts
        initMeetingAndHallEc();
        function initMeetingAndHallEc() {
            const meetingEc = echarts.init(...$('.meeting-echart-box .meeting-echart'));
            const hallEc = echarts.init(...$('.hall-echart-box .hall-echart'));

            const meetingOpt = {
                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b}: {c} ({d}%)"
                },
                grid: {
                    left: 0,
                    bottom: '10%',
                    containLabel: false
                },
                color: ['#2192FF', '#E8D612', '#07EFA0', '#2192FF', '#FF721D', '#405AFF'],
                series: [{
                    name: '会议室使用频率',
                    type: 'pie',
                    center: ['40%', '50%'],
                    radius: ['50%', '75%'],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false
                        }
                    },
                    data: [{
                            value: 25,
                            name: '1号会议厅'
                        },
                        {
                            value: 45,
                            name: '2号会议厅'
                        },
                        {
                            value: 15,
                            name: '3号会议厅'
                        },
                        {
                            value: 30,
                            name: '4号会议厅'
                        },
                        {
                            value: 10,
                            name: '5号会议厅'
                        },
                        {
                            value: 10,
                            name: '6号会议厅'
                        }
                    ]
                }]
            };
            const hallOpt = {
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            
                        type : 'shadow'        
                    }
                },
                legend: {
                    top: '3%',
                    right: 0,
                    itemWidth: 33,
                    itemHeight: 16,
                    itemGap: 25,
                    icon: 'rect',
                    textStyle: {
                        color: '#fff',
                        fontSize: 14
                    }
                },
                grid: {
                    left: 0,
                    right: 0,
                    bottom: 0,
                    containLabel: true
                },
                xAxis : [
                    {
                        type : 'category',
                        data : ['07-23', '07-24', '07-25', '07-26', '07-27', '07-28', '07-29'],
                        axisLine: {
                            lineStyle: {
                                color: '#4B96C6'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        },
                        axisTick: {
                            show: false
                        }
                    }
                ],
                yAxis : [
                    {
                        type : 'value',
                        axisLine: {
                            lineStyle: {
                                color: '#4B96C6'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: ['#4B96C6']
                            }
                        },
                        axisLabel: {
                            color: '#fff',
                            fontSize: 14
                        },
                        axisTick: {
                            show: false
                        }
                    }
                ],
                color: ['#389FFF', '#FFAD38'],
                series : [
                    {
                        name:'1号展厅',
                        type:'bar',
                        barWidth: 15,
                        data:[1.9, 2.2, 1.3, 1.6, 1.8, 2.5, 2.6]
                    },
                    {
                        name:'2号展厅',
                        type:'bar',
                        barWidth: 15,
                        barGap: 0,
                        data:[1.2, 2.4, 2.2, 1.1, 1.1, 1.1, 2.2]
                    }
                ]
            };

            meetingEc.setOption(meetingOpt);
            hallEc.setOption(hallOpt);
        }
    })
</script>